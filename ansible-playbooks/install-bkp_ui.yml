---
- hosts: vms
  remote_user: centos
  tasks:
    - name: install backup k8s client
      include_role: 
        name: cloud-pg.ansible_role_k8s_users
      vars:
        users:
          path: "/home/centos/"
          prefix: user
          name: user01-bkp
        kube_admin:
          cluster: kubernetes
          cluster_url: https://90.147.102.98:6443
          ca_oneline: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNU1URXhPVEUyTWpNek5Wb1hEVEk1TVRFeE5qRTJNak16TlZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT2JoCkRWa09BYUdoVnpPeS81MHZLSzJzU21IVGhnbktTWUEzREVDMjdKNTF3dGRPQllKcUxnc0l6aE9RWFVrcFl4dUcKbXJoemViblBkdVVaMXhCSk11WmdodEZyb2ltZi9ZbmRueVFPNXVrY2hhQnJZdTl6TFpOTTFYYjh3REF0V0FUQgpMbzZIVjB6d1Bqb2l3SmJrUXduQ0NuVytkWVhJakh3WkJuam45UExzaGF6NGMrbUxaejRvY3ovcU5qcjgrK3JsCmZmcUFzL3NFZ0ZBdmtqOGg0dFppTUNDZEhabG5lMkFGa0VQYjZjUkVzOEtselJLcXZwR0pzV0xuemJ0WE5YMGQKbmpLOExzR2loNloyZEhrMXFqMlpXV0RWeTBhenBBRGh3cXRwZkFCSUh4RWg5aEpFeDZqaEtFd0F1MDJQbk85cwpxbjBSQXQ3bWpnMWxMNHh2Z3FFQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFML1RmVDZoUzJiS2h5cVVaWXNpOE5CRHRHdngKUWZsZ2drZmUvUjNGYjVCV285Ui9PQ21oamNjbnVkNmY1dWd0SHFZZDR3aXM2VHZwWVRvNm43ZVg2b09iQnJoWgplNVhXSG1Gd0NBaXlZSU10UU1UbVRsMWtVTFkzUzg4bmEvUFFyaHNMWDZOMGFUZDgwNy9BVWVaMUovTGF1UFJYCjd3TkxPUFBqbXY2TGRVaUErNGxsM3loK2ZLK091VjI5NHVraDVKWTRWTlh2eTBrSHUwdG0zY0xUV05nT3NWaXcKMGxCWUV1WlBNbUhnb05aNFNURzVaOG1yV0tITUZMTWtDNDVIUzNpZ3dka3A3S1R5TXNhbmxid3JyUk1vZ3F4dQpvcytrZzM3TVExWXNRM0g1QXpDOUxDb2E1NVFpQ2pScGtDVUMrR1pac05JMXZBbkJiN1RkT1lKZlUrUT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
          config: |
            apiVersion: v1
            clusters:
            - cluster:
                certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNU1URXhPVEUyTWpNek5Wb1hEVEk1TVRFeE5qRTJNak16TlZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT2JoCkRWa09BYUdoVnpPeS81MHZLSzJzU21IVGhnbktTWUEzREVDMjdKNTF3dGRPQllKcUxnc0l6aE9RWFVrcFl4dUcKbXJoemViblBkdVVaMXhCSk11WmdodEZyb2ltZi9ZbmRueVFPNXVrY2hhQnJZdTl6TFpOTTFYYjh3REF0V0FUQgpMbzZIVjB6d1Bqb2l3SmJrUXduQ0NuVytkWVhJakh3WkJuam45UExzaGF6NGMrbUxaejRvY3ovcU5qcjgrK3JsCmZmcUFzL3NFZ0ZBdmtqOGg0dFppTUNDZEhabG5lMkFGa0VQYjZjUkVzOEtselJLcXZwR0pzV0xuemJ0WE5YMGQKbmpLOExzR2loNloyZEhrMXFqMlpXV0RWeTBhenBBRGh3cXRwZkFCSUh4RWg5aEpFeDZqaEtFd0F1MDJQbk85cwpxbjBSQXQ3bWpnMWxMNHh2Z3FFQ0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFML1RmVDZoUzJiS2h5cVVaWXNpOE5CRHRHdngKUWZsZ2drZmUvUjNGYjVCV285Ui9PQ21oamNjbnVkNmY1dWd0SHFZZDR3aXM2VHZwWVRvNm43ZVg2b09iQnJoWgplNVhXSG1Gd0NBaXlZSU10UU1UbVRsMWtVTFkzUzg4bmEvUFFyaHNMWDZOMGFUZDgwNy9BVWVaMUovTGF1UFJYCjd3TkxPUFBqbXY2TGRVaUErNGxsM3loK2ZLK091VjI5NHVraDVKWTRWTlh2eTBrSHUwdG0zY0xUV05nT3NWaXcKMGxCWUV1WlBNbUhnb05aNFNURzVaOG1yV0tITUZMTWtDNDVIUzNpZ3dka3A3S1R5TXNhbmxid3JyUk1vZ3F4dQpvcytrZzM3TVExWXNRM0g1QXpDOUxDb2E1NVFpQ2pScGtDVUMrR1pac05JMXZBbkJiN1RkT1lKZlUrUT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
                server: https://90.147.102.98:6443
              name: kubernetes
            contexts:
            - context:
                cluster: kubernetes
                user: kubernetes-admin
              name: kubernetes-admin@kubernetes
            current-context: kubernetes-admin@kubernetes
            kind: Config
            preferences: {}
            users:
            - name: kubernetes-admin
              user:
                client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM4akNDQWRxZ0F3SUJBZ0lJQmpzQlBoWkpIWDR3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB4T1RFeE1Ua3hOakl6TXpWYUZ3MHlNREV4TVRneE5qSXpOREphTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXdFTXJEcWlXMStpcnl3LysKQnE2YVZBU08yTng2Um5Ybis5SVF6bm9FRkNqY0MvQWpvRUlRcXphcHpZQkFFT0RLeWVhaldHeG5VVUxCalFHYQpEQVRjVGE3NTNldFpMN3JXRTAzcHorczBTTUw4elk1WXB6bWZXK29QcUk0SldGMU5MMkpZQ2VTSXFlSGlBemhkCkJmL3pnK0ZRdGhkaGJDM01zV3lHTTgwZ2ZITnFlL2dDMmNkbkZIUndBODlWSkdQWHpaVmhLaFhxMjVQdkZvRSsKOVNkeFRPV09YcjVIQXJMWnRsQ0E5c2Q1WWxWZHkySHoxdk9uVnBXWCtVVmhwUFpnQ1Z3VXo4YS80aU5NRUZvcQpDYUpIVktwSDBXUng1THQwaTlNcktqckZqaEdjdTBaODlpczZSTTlQaGxScm9sMXpYVE9ybFM5Qk9XNnZaOFRqCk9CaXg1d0lEQVFBQm95Y3dKVEFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFCOTBzU1lET0NZWmF0eVFmV1kwNnovaDQrYlRIenVKdWRjRwpQSko1UVBvb2dpaFJKMzBQaW5UZVV2c2Ird1p6SEtWZTlWK05ITy9RWENocnlzOXZRcnltWWx4UC92S1VVbUg3Cjd5THhqdDFZMXVnSU5lMVg0OHI1ODZMVlRsVzI3QkR6R0VuSE8zYWR4dGhFa0pZaU1QbW5Tb0w1ekVyaUVNeXcKamd1S3RUSEJBcTROaDRubkx4UEI1OU93dERhb0ZKa1Zsa3Z3TmpoTHJsSjZaNTEyWHc5NG5KekpXVE84WmNDawplWHYyTHFnTzNhMmhMNkRQaERlT1ZZSytPU3kzTVpNNWE1bnVLVE9VL2RVNG9TZ3ZPRS9zOFBNTkp0bHpXREdvCjNyNkZqY1JJckNJNmEwaDNTYzZRUHUwb0FvdzZvdVZVekpYMTY3SVBGdjRFd1d4K01VRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
                client-key-data: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb1FJQkFBS0NBUUVBd0VNckRxaVcxK2lyeXcvK0JxNmFWQVNPMk54NlJuWG4rOUlRem5vRUZDamNDL0FqCm9FSVFxemFwellCQUVPREt5ZWFqV0d4blVVTEJqUUdhREFUY1RhNzUzZXRaTDdyV0UwM3B6K3MwU01MOHpZNVkKcHptZlcrb1BxSTRKV0YxTkwySllDZVNJcWVIaUF6aGRCZi96ZytGUXRoZGhiQzNNc1d5R004MGdmSE5xZS9nQwoyY2RuRkhSd0E4OVZKR1BYelpWaEtoWHEyNVB2Rm9FKzlTZHhUT1dPWHI1SEFyTFp0bENBOXNkNVlsVmR5Mkh6CjF2T25WcFdYK1VWaHBQWmdDVndVejhhLzRpTk1FRm9xQ2FKSFZLcEgwV1J4NUx0MGk5TXJLanJGamhHY3UwWjgKOWlzNlJNOVBobFJyb2wxelhUT3JsUzlCT1c2dlo4VGpPQml4NXdJREFRQUJBb0lCQUNZd3NXclYvakNoSFE3VwovR1NqWmpCdVAxbkFZZUdCSmpXVlFwVmhFMUpWMDIvam9aQUJ6NEhTOStQRUovV3lVVlhOcElDNTk4UGllTVBqCm40L25uME1uRUtjT1NzYjZXKysxdUUzK3NJSUxpVi9qZUtTdkE0S2tlYnZIaXYrc2VOcUN0RzR5b1JydHJaRnEKTHNBMFdWREcvdHRNeGFOUmJhbUlueGZIRlQ3aTdlMFBTSFFNNThIaE5ncFRYS1M4bEx1cXFYVFNwWXRlVFMwOAo5V2dHZ3J4NVpXQWVsaGxkYmtSS3RxVlZrQkppZmtiR1RDUFZhQWdZek5JVEg0Ymx2QnY1L0MrNllTc2NoN20rCjFwNEdTZkRnczBVeXR4ZlhDTjB3SGs0WkN1TDFrbTZUa25vbjZEdHMyWkhHMkNNUFEwL0F0alRqMjJpc1I3RVoKYTVDZTJlRUNnWUVBNms3bnBid0s1Z0hERzhTdkRiUWZnclFNVzlhMUgvTHRWK29aM1dpR015SWRiSmdpRXpLKwo5LzFzYW9NME0zRzFwalV4ZkNhbm1WSXU4alFEdGJTajF5SU1WMit3UzkvblMzQkpsQWtwaWZscjVpTVNOM3R3CjZnTjB3M2lZRS9wNWx3UGM0VnptWkVDa0pDT2lad1JqcFVSQUNCT2lhdmNxQktwemR1Rm9sdWtDZ1lFQTBnL0gKVEVHeVhGelBuV2pvRHFUVHg2bmppV2dRVU4zMHVwUmozalRpeW81eEdPV1FVZ1RTVnlEU1FMRHRIVzVQM1NsUAo2ZWFlOXlNRjFvWFJibUw3L1Jjc3AyOU1Id2E1Vk1sUG9BT1pxT0c5Zm1UYVRnYXdIZm9oc0hOUFgzNlZIN1gxCkRVU3BnM20waDdodFQxaW1Ca2ZCRDVmWlhoaEZEWmFpZURjdElFOENnWUVBc0ZtL0JBQ3AreitzUjhRYk5TY3kKNkQ3M1psQU5kd1J5R3M4NXRHa3RTR01PM21NS2tvU0pNMEZzVGlaK0xaSVI5QXpwTjlZb0lyKzJVZGxRU1h5eQpMQU9XWW1EUHdldTl2QXZCZFVnSUdhNit4VEgwVGduOGpFVVpwdDJuS0xKR3ZhRE1xRm94bFpjSmM2SFdZODdyCjZNR2JwL2lQTUE3amN5dVBTQlNUa2JFQ2YxMktxVFZNRENFVk0xN2xXSEVzOVNIMGhWNnErSmtLUGZEWUk2RFAKN0M1SFFCWFdKRzVodDBrVlZJdDZQaHpkQXJONXNoeDJsbE4zUlNKQ2RRQ3pFNE9nemtIQlRpU0MyZ1Rub0kyaApETXdudWpxT3JxZ1FVbDBIQmZtTlg4c21rMEdMeFpRaS8xbU0yTmVYU1JZTVkrSm9FWkRnRGV2WTR1Y3FMUzliCllyMENnWUJaK0plSWZvbWdLZm1IamhJN0FRaGo4VnJQaXJuaENINGpTeGZXRTN4a2lFSWJtYkNQWklBK21MMUkKWDlNbEJyaTBEVklUTEhRdDZWU1JkY0liSFY4U2hTbVFSREhVcEJXTWZodVNiakpDQzlhbU45WVBUR0V5WHF0OApIYmxaZVFyOENyZjRrelNzcGJ1S2hhTUg4a0dEbnRyWUFOWHU2Y0hmM0RiR2h2SUVZQT09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
          ca_cert_file: | 
            -----BEGIN CERTIFICATE-----
            MIICyDCCAbCgAwIBAgIBADANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwprdWJl
            cm5ldGVzMB4XDTE5MTExOTE2MjMzNVoXDTI5MTExNjE2MjMzNVowFTETMBEGA1UE
            AxMKa3ViZXJuZXRlczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAObh
            DVkOAaGhVzOy/50vKK2sSmHThgnKSYA3DEC27J51wtdOBYJqLgsIzhOQXUkpYxuG
            mrhzebnPduUZ1xBJMuZghtFroimf/YndnyQO5ukchaBrYu9zLZNM1Xb8wDAtWATB
            Lo6HV0zwPjoiwJbkQwnCCnW+dYXIjHwZBnjn9PLshaz4c+mLZz4ocz/qNjr8++rl
            ffqAs/sEgFAvkj8h4tZiMCCdHZlne2AFkEPb6cREs8KlzRKqvpGJsWLnzbtXNX0d
            njK8LsGih6Z2dHk1qj2ZWWDVy0azpADhwqtpfABIHxEh9hJEx6jhKEwAu02PnO9s
            qn0RAt7mjg1lL4xvgqECAwEAAaMjMCEwDgYDVR0PAQH/BAQDAgKkMA8GA1UdEwEB
            /wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAL/TfT6hS2bKhyqUZYsi8NBDtGvx
            Qflggkfe/R3Fb5BWo9R/OCmhjccnud6f5ugtHqYd4wis6TvpYTo6n7eX6oObBrhZ
            e5XWHmFwCAiyYIMtQMTmTl1kULY3S88na/PQrhsLX6N0aTd807/AUeZ1J/LauPRX
            7wNLOPPjmv6LdUiA+4ll3yh+fK+OuV294ukh5JY4VNXvy0kHu0tm3cLTWNgOsViw
            0lBYEuZPMmHgoNZ4STG5Z8mrWKHMFLMkC45HS3igwdkp7KTyMsanlbwrrRMogqxu
            os+kg37MQ1YsQ3H5AzC9LCoa55QiCjRpkCUC+GZZsNI1vAnBb7TdOYJfU+Q=
            -----END CERTIFICATE-----

          ca_cert_key: |
            -----BEGIN RSA PRIVATE KEY-----
            MIIEpAIBAAKCAQEA5uENWQ4BoaFXM7L/nS8oraxKYdOGCcpJgDcMQLbsnnXC104F
            gmouCwjOE5BdSSljG4aauHN5uc925RnXEEky5mCG0WuiKZ/9id2fJA7m6RyFoGti
            73Mtk0zVdvzAMC1YBMEujodXTPA+OiLAluRDCcIKdb51hciMfBkGeOf08uyFrPhz
            6YtnPihzP+o2Ovz76uV9+oCz+wSAUC+SPyHi1mIwIJ0dmWd7YAWQQ9vpxESzwqXN
            Eqq+kYmxYufNu1c1fR2eMrwuwaKHpnZ0eTWqPZlZYNXLRrOkAOHCq2l8AEgfESH2
            EkTHqOEoTAC7TY+c72yqfREC3uaODWUvjG+CoQIDAQABAoIBAGk/ACmvc9jtRmYf
            29wYak+5MXMkzH5cA2N6NJCvkm+tuPMS8vn/UxvemKpcbdnzDuW2V4NryHqGc2l+
            fQZEh/py2CJREWwuLZKSP4Bddq+fO97j9Qa4l3cFWG3US/vqP6xzL7jzQz2kaolv
            3CEszs588O25s7MXt8q+Ua/99TBi+eekLSRHMO6XGrFe6jjCU3Ilq1Wu9rJ07kD8
            gyCSu4Ohg4GE55Pv47kiMg1oDM36NRtv0sbE/AJLMRtEOkWhe7B1uhce6iyMTzke
            scx0JhH6boZZSpDGnwlSmBtUx+bTe+Wh8X5xKWgTlXq8iZNOft/Dybkho6s0jPBs
            knteF30CgYEA8NiG1jqe7o4CQsOjcBK/BHSrA+YWRswP6+bhjNxgwONa6U4ype7z
            9Mux22djpTpH/2sOXaFO9Md00NLWvCF6F/w/Zh+fhkdy/W7l7afiNg9711VXLvPK
            qVSvtjQJJqbBe66TG++Pa+Cb+dwwqm/+tEtN97+tU219yYg7vRqtg1sCgYEA9Wf8
            HFAJMWvYVlbicVOWj2dpXM4NhIn8ypXkN9kcde5tNnae71EQSmPpoPeh/RKwWoZI
            6lfrS7pWqIRvhUjEuZslTZWRIm+6Mo1XYWMIy7782Nnj1mDm1qqAgv5vEfUlGWfE
            9LajgH+jn+NZVKOsSznDj/NAUpcaQcPzkNSoHrMCgYEA4DpGtraW9zQhKLVpuVLK
            okRYX2XcgYdEn3UxsmoObiZ9ok5aWyAv4k2uRb1pCRBMraCnHEas8rmrqStSHo7w
            U9pV0CdK5sIobYjM6kjuEzSxMJZUd/MjUCj2+iRSDLkd05+BeHW9SkswDByS9msU
            cBjX+vtqTAzZGkMKkxF+T5cCgYAX2Vgt5DVQgTuQAHeXLdlm7FTX+QplRAe2JGT+
            bHIQn/ArJ9IATe94W0dcJlSuxH8w/PXfGFY8kMpVLDGuUUkVBJfWd1+YaiU9PnEs
            fLRhIJlv9ZTnw5kLaZx9nn5qz1kgo+4HHiy7kyvyoOSQjitzUBTKS4iHvjmGBKYK
            ADCqcwKBgQDvfn/RFzU7IVddNuN0Eu4UzdHZQrs/Uaw/bIlH6QGnZAIWhyxiCjYu
            DFG6cgHC+Exb82I4VPkyhtMiPESn1l/t3a2Bh+7vy94tHNFTTFfHg1SR7snQcSnn
            omSrTnQ488F226NrHbiK3oXhKLmS4zlEunnYyhW8zSQyalbXo1b4jw==
            -----END RSA PRIVATE KEY-----
